<!DOCTYPE html>
<html lang=en>
    <head>
        <title>JS Game</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/codemirror.css">
        <link rel="stylesheet" href="css/jsgame.css">
        <script src="js/jquery-3.2.1.min.js"></script>
        <script src="js/jshint.js"></script>
        <script src="js/codemirror.js"></script>
        <script src="js/mode/javascript/javascript.js"></script>
        <script src="js/jsgame.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <textarea id="code" name="code">
runner.run({

    init: function(runner) {
        console.log('init');
        runner.clearBoard();
    }

});
                    </textarea>
                    <button id="check-button" class="btn btn-default">Check</button>
                    <button id="play-button" class="btn btn-default">Play</button>
                    <p id="check-error" class="error-text">
                    </p>
                </div>
                <div class="col-md-6">
                    <div class="board-container">
                        <canvas id="board"></canvas> 
                    </div>
                </div>
            </div>
        </div>


        <script>

            var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
                lineNumbers: true,
                matchBrackets: true,
                continueComments: "Enter",
                extraKeys: {"Ctrl-Q": "toggleComment"}
            });

            $('#check-button').click(function() {
                $('#check-error').empty();
                JSHINT(editor.getValue());
                var data = JSHINT.data();
                console.debug(data);
                if (typeof data['errors'] != 'undefined') {
                    $.each(data['errors'], function(i, e) {
                        var line = '<div>Line ' + e['line'] + ': ' + e['reason'] + '</div>';
                        $('#check-error').append(line);
                    });
                } else {
                    $('#check-error').append('Ok');
                }
            });

            $('#play-button').click(function() {
                var code = editor.getValue();
                eval(code);
            });

            runner = new GameRunner('board');
        </script>
    </body>
</html>
